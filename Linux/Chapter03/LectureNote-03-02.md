# 0. Introduction

> [입력 모드로 변경](#입력모드로-변경)    
> [삭제](#삭제)    
> [복사](#복사)    
> [종료 및 저장](#종료-및-저장)    
> [치환](#치환)    
> [vi에서 shell 명령어 실행하기 ](#vi에서-shell-명령어-실행하기)    
> [vim에서 파일 열기](#vim에서-파일-열기)    
> [기존 내용에 삽입, 추가 그리고, 정보 확인하기](#기존-내용에-삽입-추가-그리고-정보-확인하기)    

- 해당 강의는 [러닝스푼즈 - 나노디그리 Python & Django backed course](https://learningspoons.com/course/detail/django-backend/)의 Jason.Kim 강사님의 Linux 강의로부터 학습한 자료입니다.

- 지난 소챕터에서는 linux의 기본적인 명령어에 대해서 학습했었다. 

- 이번에는 text 기반에서 사용할 수 있는 에디터인 **문서편집기 vi editor** 에 대해 학습한다.  
    - vi editor를 다루지 못하면 linux를 제대로 다룰 수 없다.

<br>

---

### 입력모드로 변경

| KEY |동작 |
|--- | ---- |
| **i** | 커서 위치에서 입력 모드로 변경 |
| ㅣ | 커서 위치의 라인 맨 앞에서 입력 모드로 변경 |
| **a** | 커서 위치의 다음 칸에 입력 모드로 변경 |
| A | 커서가 위치한 라인 맨 뒤에서 입력 모드로 변경 | 

<br>

### 삭제

| KEY |동작 | 
| ---- | ---- |
| x | 커서가 위치한 곳의 뒤 문자를 삭제 | 
| X | 커서가 위치한 곳의 앞 문자를 삭제 | 
| dd | 커서가 위치한 행 삭제 |
| 숫자 + dd | 커서가 위치한 곳부터 입력한 숫자만큼 행 삭제 |

- 만약 소문자 x를 눌러서 뒤 문자를 다 삭제하면 앞 문자가 삭제되기 시작한다.
- 그리고, **_문자를 다 삭제해도 행 자체는 삭제되지 않는다._** 
- 그래서 별도로 dd를 눌러 행을 삭제한다.

- 또한, 5행을 삭제하고 싶다면 명령 모드에서 5를 입력한 후 dd를 입력하면 커서가 위치한 행을 포함하여 5줄이 삭제된다. 

<br>

### 복사

|KEY | 동작 |
|---- |---- |
|yy | 커서가 위치한 곳의 행을 복사 |
| 숫자 + yy | 커서가 위치한 곳부터 입력한 숫자만큼 행 복사 |
| p | 복사한 내용을 커서가 위치한 라인의 아래에 붙여넣기 |
| P | 복사한 내용을 커서가 위치한 라인의 위에 붙여넣기 |


<br>


### 종료 및 저장

|KEY | 동작 |
|---- |---- |
| :q | 종료 (변경된 내용이 없는 경우) |
| :q! | 강제 종료 (변경된 내용이 존재하더라도 무시) |
| :w | 파일 저장 |
| :wq | 파일 저장 후 종료 (w + q) | 

<br>

### 치환

- 리눅스는 대소문자를 구분한다. 

|KEY | 동작 |
|---- |---- |
|:%s/[원본 단어]/[바꿀 단어]/[옵션] | [원본 단어]를 [바꿀 단어]로 치환 |

```yml
:21s/dalkom/learning/

# 또는 커서를 수정하려는 행에다가 둔 후, 행 정보를 빼고 입력해도 된다.
:s/dalkom/learning/
```


- 옵션은 아래와 같다.

| 옵션 | 의미 | 
| ---- | ---- |
| i | 대소문자 구분 없이 치환 |
| **g** | 전역 치환 |
| c | 하나 하나 치환할 지 물어보고 치환 |


- 옵션을 사용하지 않고, 치환을 실행했다면 원본 단어가 여러 개 있을 경우, 맨 첫 번째만 치환된다. 이 때 `g`를 사용하면 모든 원본 단어가 바꿀 단어로 바뀐다. 

```yml
:21s/dalkom/learning/g
```

<br>


### vi에서 shell 명령어 실행하기 

| KEY | 동작 |
| ---- | ---- |
| :! 명령어 | vi에서 shell 명령어 실행 |
| :.! 명령어 | vi에서 shell 명령어 결과를 vi 편집기에 출력 |
| :r! 명령어 | 명령어 Console text 가져오기 |


```yml
:! ls -l ./temp/

# 그러면 명령어의 실행 결과를 화면에 보여준다. 
# 그러면 어느 키든 입력하면 vi로 돌아온다.
```

- 생성되지 않은 파일을 `vi <생성되지 않은 파일 이름>`을 입력하면 새로운 파일이 생성되면서, 내용을 입력하기 위해 vi가 뜬다.

- 또한, 현재 작업 중인 파일이 `a` 파일이어도, 편집 후 `:w  b`로 입력을 하면, `b` 명칭의 파일로 현재 편집된 내용으로 바로 생성된다.

<br>

### vim에서 파일 열기

|KEY | 동작 |
| ---- | ---- |
| :e [파일명 or 경로] | 파일 열기 |
| :enw | 현재 창을 닫고 새 문서를 열기 |

- `vi a`로 a를 편집하고 있다가, `:e b`를 하면 b파일이 열린다.

<br>

### 기존 내용에 삽입, 추가 그리고, 정보 확인하기

|KEY | 동작 |
| ---- | ---- |
| :w >> [파일명] | [파일명] 에 내용 추가 |
| :f | 현재 작업 중인 파일의 정보(파일명, 총 라인 수)|
| :[n]r[파일명] | '[파일명]의 내용'을 현재 편집 중인 File의 n라인부터 삽입 |
| :[n]r![파일명] | '[명령어] 실행 결과'를 현재 편집 중인 File의 n라인부터 삽입 | 


- vi에서 편집 중인 내용을 `w >> b`로 현재와 다른 파일을 입력해도, 이 b 파일에 현재 편집된 내용이 추가된다. 

- `:r! ls -l ./temp/` 를 vi에서 실행하면 커서가 있는 부분에 이 명령어의 실행 결과가 붙여진다.
    - 실행 결과가 `ls: cannot access /temp/: No such file or directory` 이면 그것이 선택된 행에 붙여진다.



- 이번에는 `:f`를 눌러 파일 상태를 확인해보자. 

    ```yml
    ...
    70 # Use SHA512 to encrypt password.
    71 ENCRYPT_METHOD SHA512
    72 
    :f
    ```

    - 위 명령어를 입력한 결과가 밑에다. 

    ```yml
    ...
    70 # Use SHA512 to encrypt password.
    71 ENCRYPT_METHOD SHA512
    72 
    "login.defs" 72 lines --100%--
    ```

    - 명령어을 입력했을 때, 커서의 위치를 기준으로 lines와 옆에 %가 결정된다. 위에 100%는 커서의 위치를 맨 아래 두었을 때다. 


<br>

---

# Reference

- [러닝스푼즈 - 나노디그리 Python & Django backed course](https://learningspoons.com/course/detail/django-backend/)